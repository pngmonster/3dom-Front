{"ast":null,"code":"var _jsxFileName = \"/home/giicoo/projects/3DOM FRONT/3dom-Front/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './ChatApp.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatApp = () => {\n  _s();\n  var _window$Telegram, _window$Telegram$WebA, _window$Telegram$WebA2, _chats$find4;\n  const [settings, setSettings] = useState({\n    isOpen: false,\n    theme: 'light'\n  });\n\n  // Получаем данные пользователя из Telegram WebApp\n  const user = ((_window$Telegram = window.Telegram) === null || _window$Telegram === void 0 ? void 0 : (_window$Telegram$WebA = _window$Telegram.WebApp) === null || _window$Telegram$WebA === void 0 ? void 0 : (_window$Telegram$WebA2 = _window$Telegram$WebA.initDataUnsafe) === null || _window$Telegram$WebA2 === void 0 ? void 0 : _window$Telegram$WebA2.user) || {\n    first_name: 'Гость',\n    photo_url: 'https://via.placeholder.com/100'\n  };\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [replyContext, setReplyContext] = useState(null);\n  const [attachment, setAttachment] = useState(null);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [activeChat, setActiveChat] = useState('1');\n  const [models, setModel] = useState([{\n    id: 'llama2',\n    name: 'Llama 2'\n  }, {\n    id: 'deepseek-r1',\n    name: 'DeepSeek'\n  }, {\n    id: 'mistral',\n    name: 'Mistral'\n  }]);\n  const [activeModel, setActiveModel] = useState('llama2');\n  const [chats, setChats] = useState([{\n    id: '1',\n    title: 'Чат 1',\n    lastMessage: 'Привет! Я твой помощник',\n    model: 'llama2'\n  }, {\n    id: '2',\n    title: 'Чат 2',\n    lastMessage: 'Чем можем помочь?',\n    model: 'deepseek-r1'\n  }, {\n    id: '3',\n    title: 'Чат 3',\n    lastMessage: 'Частые вопросы',\n    model: 'mistral'\n  }]);\n  const [isCreatingChat, setIsCreatingChat] = useState(false);\n  const [newChatTitle, setNewChatTitle] = useState('');\n  const fileInputRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const newChatInputRef = useRef(null);\n  useEffect(() => {\n    var _window$matchMedia, _window;\n    // Простая проверка темы без использования Telegram API\n    const isDarkMode = (_window$matchMedia = (_window = window).matchMedia) === null || _window$matchMedia === void 0 ? void 0 : _window$matchMedia.call(_window, '(prefers-color-scheme: dark)').matches;\n    const theme = isDarkMode ? 'dark' : 'light';\n\n    // Применяем тему\n    document.body.classList.toggle('dark-theme', theme === 'dark');\n  }, []);\n\n  // Упрощенная функция смены темы\n  const toggleTheme = () => {\n    const newTheme = document.body.classList.contains('dark-theme') ? 'light' : 'dark';\n    document.body.classList.toggle('dark-theme', newTheme === 'dark');\n  };\n\n  // Инициализация с приветственным сообщением\n  useEffect(() => {\n    var _chats$find;\n    const welcomeMessage = {\n      id: '1',\n      text: `Привет! Это чат \"${(_chats$find = chats.find(c => c.id === activeChat)) === null || _chats$find === void 0 ? void 0 : _chats$find.title}\". Чем могу помочь?`,\n      sender: 'bot',\n      timestamp: new Date()\n    };\n    setMessages([welcomeMessage]);\n  }, [activeChat]);\n\n  // Автопрокрутка к новым сообщениям\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // Фокус на поле ввода при создании чата\n  useEffect(() => {\n    if (isCreatingChat && newChatInputRef.current) {\n      newChatInputRef.current.focus();\n    }\n  }, [isCreatingChat]);\n\n  // Обработчик отправки сообщения\n  const handleSendMessage = () => {\n    if (!inputText.trim() && !attachment) return;\n\n    // Если чат был пустым, снимаем флаг\n    setChats(prev => prev.map(chat => chat.id === activeChat && chat.isEmpty ? {\n      ...chat,\n      isEmpty: false\n    } : chat));\n    if (!inputText.trim() && !attachment) return;\n    const userMessage = {\n      id: Date.now().toString(),\n      text: inputText,\n      sender: 'user',\n      timestamp: new Date(),\n      replyTo: replyContext === null || replyContext === void 0 ? void 0 : replyContext.messageId\n    };\n    if (attachment) {\n      const attachmentType = attachment.type.startsWith('image/') ? 'image' : 'document';\n      userMessage.attachment = {\n        type: attachmentType,\n        url: URL.createObjectURL(attachment),\n        name: attachment.name\n      };\n    }\n    setMessages(prev => [...prev, userMessage]);\n    setInputText('');\n    setAttachment(null);\n    setReplyContext(null);\n\n    // Обновляем последнее сообщение в списке чатов\n    setChats(prev => prev.map(chat => chat.id === activeChat ? {\n      ...chat,\n      lastMessage: inputText || 'Вложение',\n      unreadCount: 0\n    } : chat));\n\n    // Имитация ответа бота\n    setTimeout(() => {\n      const botResponse = {\n        id: (Date.now() + 1).toString(),\n        text: generateBotResponse(inputText, replyContext),\n        sender: 'bot',\n        timestamp: new Date(),\n        replyTo: userMessage.id\n      };\n      setMessages(prev => [...prev, botResponse]);\n    }, 1000);\n  };\n\n  // Генерация ответа бота\n  const generateBotResponse = (userText, context) => {\n    const responses = [\"Я понял ваш запрос. Давайте обсудим это подробнее.\", \"Интересный вопрос! Давайте разберемся вместе.\", \"Спасибо за ваше сообщение. Я уже работаю над этим.\", \"Хорошо, я записал эту информацию. Что еще вас интересует?\", \"Отличное замечание! Давайте продолжим наш разговор.\"];\n    if (context) {\n      return `Отвечая на ваше сообщение \"${context.messageText}\": ${responses[Math.floor(Math.random() * responses.length)]}`;\n    }\n    return responses[Math.floor(Math.random() * responses.length)];\n  };\n\n  // Обработчик вложения файла\n  const handleAttachment = e => {\n    if (e.target.files && e.target.files[0]) {\n      setAttachment(e.target.files[0]);\n    }\n  };\n\n  // Обработчик нажатия клавиш\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // Переключение чата\n  const handleChatChange = chatId => {\n    var _chats$find2, _chats$find3;\n    // Удаляем предыдущий чат, если он пустой\n    setChats(prev => {\n      const prevChat = prev.find(c => c.id === activeChat);\n      if (prevChat !== null && prevChat !== void 0 && prevChat.isEmpty) {\n        return prev.filter(c => c.id !== activeChat);\n      }\n      return prev;\n    });\n    setActiveChat(chatId);\n    setIsMenuOpen(false);\n    setMessages([{\n      id: '1',\n      text: `Добро пожаловать в чат \"${(_chats$find2 = chats.find(c => c.id === chatId)) === null || _chats$find2 === void 0 ? void 0 : _chats$find2.title}\"!`,\n      sender: 'bot',\n      timestamp: new Date()\n    }]);\n\n    // Сбрасываем непрочитанные\n    setChats(prev => prev.map(chat => chat.id === chatId ? {\n      ...chat,\n      unreadCount: 0\n    } : chat));\n    setActiveChat(chatId);\n    setIsMenuOpen(false);\n    setMessages([{\n      id: '1',\n      text: `Добро пожаловать в чат \"${(_chats$find3 = chats.find(c => c.id === chatId)) === null || _chats$find3 === void 0 ? void 0 : _chats$find3.title}\"!`,\n      sender: 'bot',\n      timestamp: new Date()\n    }]);\n\n    // Сбрасываем непрочитанные\n    setChats(prev => prev.map(chat => chat.id === chatId ? {\n      ...chat,\n      unreadCount: 0\n    } : chat));\n  };\n\n  // Создание нового чата\n  const handleCreateChat = modelId => {\n    const newChat = {\n      id: Date.now().toString(),\n      title: `Чат ${chats.filter(c => c.model === modelId).length + 1}`,\n      lastMessage: 'Новый чат создан',\n      model: modelId,\n      isEmpty: true // Теперь это допустимо\n    };\n    setChats(prev => [...prev, newChat]);\n    handleChatChange(newChat.id);\n  };\n  const [chatMenu, setChatMenu] = useState({\n    chatId: null,\n    isOpen: false,\n    position: null\n  });\n\n  // Получение чатов по моделям\n  const getChatsByModel = modelId => {\n    return chats.filter(chat => chat.model === modelId);\n  };\n  const handleOpenMenu = (chatId, e) => {\n    e.stopPropagation();\n    const rect = e.currentTarget.getBoundingClientRect();\n    setChatMenu({\n      chatId,\n      isOpen: true,\n      position: {\n        top: rect.bottom + 5,\n        left: rect.left - 100\n      }\n    });\n  };\n  const handleRenameChat = newName => {\n    setChats(prev => prev.map(chat => chat.id === chatMenu.chatId ? {\n      ...chat,\n      title: newName\n    } : chat));\n    setChatMenu({\n      chatId: null,\n      isOpen: false,\n      position: null\n    });\n  };\n  const handleDeleteChat = () => {\n    if (!chatMenu.chatId) return;\n    setChats(prev => prev.filter(chat => chat.id !== chatMenu.chatId));\n    if (activeChat === chatMenu.chatId) {\n      var _remainingChats$;\n      const remainingChats = chats.filter(chat => chat.id !== chatMenu.chatId);\n      setActiveChat(((_remainingChats$ = remainingChats[0]) === null || _remainingChats$ === void 0 ? void 0 : _remainingChats$.id) || '');\n    }\n    setChatMenu({\n      chatId: null,\n      isOpen: false,\n      position: null\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-button\",\n        onClick: () => setIsMenuOpen(!isMenuOpen),\n        children: \"\\u2630\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: ((_chats$find4 = chats.find(c => c.id === activeChat)) === null || _chats$find4 === void 0 ? void 0 : _chats$find4.title) || 'Выберите чат'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), activeChat && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"create-chat-button\",\n        onClick: () => {\n          var _chats$find5;\n          const currentModel = ((_chats$find5 = chats.find(c => c.id === activeChat)) === null || _chats$find5 === void 0 ? void 0 : _chats$find5.model) || activeModel;\n          handleCreateChat(currentModel);\n        },\n        children: \"\\uFF0B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `side-menu ${isMenuOpen ? 'open' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"settings-button\",\n        onClick: () => setSettings(prev => ({\n          ...prev,\n          isOpen: true\n        })),\n        children: \"\\u2699\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), settings.isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settings-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-settings\",\n            onClick: () => setSettings(prev => ({\n              ...prev,\n              isOpen: false\n            })),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-profile\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.photo_url || 'https://via.placeholder.com/100',\n              alt: \"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440\",\n              className: \"user-avatar\",\n              onError: e => {\n                e.target.src = 'https://via.placeholder.com/100';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [user.first_name, user.last_name].filter(Boolean).join(' ') || 'Пользователь'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this), user.username && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"@\", user.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 35\n            }, this), user.language_code && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u042F\\u0437\\u044B\\u043A: \", user.language_code.toUpperCase()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"theme-switcher\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const newTheme = settings.theme === 'light' ? 'dark' : 'light';\n                setSettings(prev => ({\n                  ...prev,\n                  theme: newTheme\n                }));\n                // Здесь можно добавить логику смены темы в Telegram WebApp\n              },\n              children: settings.theme === 'light' ? '🌙 Тёмная тема' : '☀️ Светлая тема'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-overlay\",\n          onClick: () => setSettings(prev => ({\n            ...prev,\n            isOpen: false\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u041C\\u043E\\u0438 \\u0447\\u0430\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-menu\",\n          onClick: () => setIsMenuOpen(false),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"categories-tabs\",\n        children: models.map(model => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `category-tab ${activeModel === model.id ? 'active' : ''}`,\n          onClick: () => setActiveModel(model.id),\n          children: model.name\n        }, model.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-list\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"create-chat-in-category small\",\n          onClick: () => handleCreateChat(activeModel),\n          children: \"\\uFF0B \\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0447\\u0430\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), getChatsByModel(activeModel).length > 0 ? getChatsByModel(activeModel).map(chat => {\n          var _chat$lastMessage, _chatMenu$position, _chatMenu$position2;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chat-item ${activeChat === chat.id ? 'active' : ''}`,\n            onClick: () => handleChatChange(chat.id),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-title\",\n                children: chat.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-preview\",\n                children: [(_chat$lastMessage = chat.lastMessage) === null || _chat$lastMessage === void 0 ? void 0 : _chat$lastMessage.substring(0, 30), chat.lastMessage && chat.lastMessage.length > 30 ? '...' : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chat-menu-button\",\n                onClick: e => handleOpenMenu(chat.id, e),\n                children: \"\\u22EE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this), chatMenu.isOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"menu-overlay\",\n                  onClick: () => setChatMenu({\n                    chatId: null,\n                    isOpen: false,\n                    position: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-context-menu\",\n                  style: {\n                    top: `${(_chatMenu$position = chatMenu.position) === null || _chatMenu$position === void 0 ? void 0 : _chatMenu$position.top}px`,\n                    left: `${(_chatMenu$position2 = chatMenu.position) === null || _chatMenu$position2 === void 0 ? void 0 : _chatMenu$position2.left}px`\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"menu-item\",\n                    onClick: () => {\n                      var _chats$find6;\n                      const newName = prompt('Введите новое название:', (_chats$find6 = chats.find(c => c.id === chatMenu.chatId)) === null || _chats$find6 === void 0 ? void 0 : _chats$find6.title);\n                      if (newName) handleRenameChat(newName);\n                    },\n                    children: \"\\u041F\\u0435\\u0440\\u0435\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"menu-item delete\",\n                    onClick: handleDeleteChat,\n                    children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0447\\u0430\\u0442\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this)]\n          }, chat.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-chats\",\n          children: \"\\u041D\\u0435\\u0442 \\u0447\\u0430\\u0442\\u043E\\u0432 \\u0432 \\u044D\\u0442\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), isMenuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-overlay\",\n      onClick: () => setIsMenuOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [activeChat ? messages.map(message => {\n        var _messages$find;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.sender}`,\n          onClick: () => setReplyContext({\n            messageId: message.id,\n            messageText: message.text\n          }),\n          children: [message.replyTo && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reply-context\",\n            children: (_messages$find = messages.find(m => m.id === message.replyTo)) === null || _messages$find === void 0 ? void 0 : _messages$find.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 17\n          }, this), message.attachment && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"attachment\",\n            children: message.attachment.type === 'image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: message.attachment.url,\n              alt: \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D\\u043D\\u043E\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n              href: message.attachment.url,\n              download: true,\n              children: [\"\\uD83D\\uDCC4 \", message.attachment.name || 'Документ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-text\",\n            children: message.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-time\",\n            children: message.timestamp.toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this)]\n        }, message.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-chat-selected\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0447\\u0430\\u0442 \\u0438\\u0437 \\u0441\\u043F\\u0438\\u0441\\u043A\\u0430 \\u0438\\u043B\\u0438 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this), activeChat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-area\",\n      children: [replyContext && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reply-preview\",\n        children: [\"\\u041E\\u0442\\u0432\\u0435\\u0442 \\u043D\\u0430: \", replyContext.messageText, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setReplyContext(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"attach-button\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          children: \"\\uD83D\\uDCCE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleAttachment,\n          style: {\n            display: 'none'\n          },\n          accept: \"image/*,.pdf,.doc,.docx\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          onKeyDown: handleKeyDown,\n          placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435...\",\n          rows: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: handleSendMessage,\n          disabled: !inputText.trim() && !attachment,\n          children: attachment ? '📤' : '➤'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatApp, \"kw2V08MdgA98DzL/w1MN7UcAteM=\");\n_c = ChatApp;\nexport default ChatApp;\nvar _c;\n$RefreshReg$(_c, \"ChatApp\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatApp","_s","_window$Telegram","_window$Telegram$WebA","_window$Telegram$WebA2","_chats$find4","settings","setSettings","isOpen","theme","user","window","Telegram","WebApp","initDataUnsafe","first_name","photo_url","messages","setMessages","inputText","setInputText","replyContext","setReplyContext","attachment","setAttachment","isMenuOpen","setIsMenuOpen","activeChat","setActiveChat","models","setModel","id","name","activeModel","setActiveModel","chats","setChats","title","lastMessage","model","isCreatingChat","setIsCreatingChat","newChatTitle","setNewChatTitle","fileInputRef","messagesEndRef","newChatInputRef","_window$matchMedia","_window","isDarkMode","matchMedia","call","matches","document","body","classList","toggle","toggleTheme","newTheme","contains","_chats$find","welcomeMessage","text","find","c","sender","timestamp","Date","_messagesEndRef$curre","current","scrollIntoView","behavior","focus","handleSendMessage","trim","prev","map","chat","isEmpty","userMessage","now","toString","replyTo","messageId","attachmentType","type","startsWith","url","URL","createObjectURL","unreadCount","setTimeout","botResponse","generateBotResponse","userText","context","responses","messageText","Math","floor","random","length","handleAttachment","e","target","files","handleKeyDown","key","shiftKey","preventDefault","handleChatChange","chatId","_chats$find2","_chats$find3","prevChat","filter","handleCreateChat","modelId","newChat","chatMenu","setChatMenu","position","getChatsByModel","handleOpenMenu","stopPropagation","rect","currentTarget","getBoundingClientRect","top","bottom","left","handleRenameChat","newName","handleDeleteChat","_remainingChats$","remainingChats","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_chats$find5","currentModel","src","alt","onError","last_name","Boolean","join","username","language_code","toUpperCase","_chat$lastMessage","_chatMenu$position","_chatMenu$position2","substring","style","_chats$find6","prompt","message","_messages$find","m","href","download","toLocaleTimeString","hour","minute","ref","_fileInputRef$current","click","onChange","display","accept","value","onKeyDown","placeholder","rows","disabled","_c","$RefreshReg$"],"sources":["/home/giicoo/projects/3DOM FRONT/3dom-Front/src/App.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './ChatApp.css';\n\n\n\nconst ChatApp: React.FC = () => {\n  const [settings, setSettings] = useState<Settings>({\n    isOpen: false,\n    theme: 'light'\n  });\n\n  // Получаем данные пользователя из Telegram WebApp\n  const user: TelegramUser = window.Telegram?.WebApp?.initDataUnsafe?.user || {\n    first_name: 'Гость',\n    photo_url: 'https://via.placeholder.com/100'\n  };\n\n\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputText, setInputText] = useState('');\n  const [replyContext, setReplyContext] = useState<ReplyContext | null>(null);\n  const [attachment, setAttachment] = useState<File | null>(null);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [activeChat, setActiveChat] = useState<string>('1');\n  const [models, setModel] = useState<Category[]>([\n    { id: 'llama2', name: 'Llama 2' },\n    { id: 'deepseek-r1', name: 'DeepSeek' },\n    { id: 'mistral', name: 'Mistral' },\n  ]);\n\n  const [activeModel, setActiveModel] = useState<string>('llama2');\n  const [chats, setChats] = useState<Chat[]>([\n    { id: '1', title: 'Чат 1', lastMessage: 'Привет! Я твой помощник', model: 'llama2' },\n    { id: '2', title: 'Чат 2', lastMessage: 'Чем можем помочь?', model: 'deepseek-r1' },\n    { id: '3', title: 'Чат 3', lastMessage: 'Частые вопросы', model: 'mistral' },\n  ]);\n\n  const [isCreatingChat, setIsCreatingChat] = useState(false);\n  const [newChatTitle, setNewChatTitle] = useState('');\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const newChatInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    // Простая проверка темы без использования Telegram API\n    const isDarkMode = window.matchMedia?.('(prefers-color-scheme: dark)').matches;\n    const theme = isDarkMode ? 'dark' : 'light';\n\n    // Применяем тему\n    document.body.classList.toggle('dark-theme', theme === 'dark');\n  }, []);\n\n  // Упрощенная функция смены темы\n  const toggleTheme = () => {\n    const newTheme = document.body.classList.contains('dark-theme') ? 'light' : 'dark';\n    document.body.classList.toggle('dark-theme', newTheme === 'dark');\n  };\n\n  // Инициализация с приветственным сообщением\n  useEffect(() => {\n    const welcomeMessage: Message = {\n      id: '1',\n      text: `Привет! Это чат \"${chats.find(c => c.id === activeChat)?.title}\". Чем могу помочь?`,\n      sender: 'bot',\n      timestamp: new Date(),\n    };\n    setMessages([welcomeMessage]);\n  }, [activeChat]);\n\n  // Автопрокрутка к новым сообщениям\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Фокус на поле ввода при создании чата\n  useEffect(() => {\n    if (isCreatingChat && newChatInputRef.current) {\n      newChatInputRef.current.focus();\n    }\n  }, [isCreatingChat]);\n\n  // Обработчик отправки сообщения\n  const handleSendMessage = () => {\n    if (!inputText.trim() && !attachment) return;\n\n    // Если чат был пустым, снимаем флаг\n    setChats(prev => prev.map(chat =>\n      chat.id === activeChat && chat.isEmpty\n        ? { ...chat, isEmpty: false }\n        : chat\n    ));\n\n    if (!inputText.trim() && !attachment) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      text: inputText,\n      sender: 'user',\n      timestamp: new Date(),\n      replyTo: replyContext?.messageId,\n    };\n\n    if (attachment) {\n      const attachmentType = attachment.type.startsWith('image/') ? 'image' : 'document';\n      userMessage.attachment = {\n        type: attachmentType,\n        url: URL.createObjectURL(attachment),\n        name: attachment.name,\n      };\n    }\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputText('');\n    setAttachment(null);\n    setReplyContext(null);\n\n    // Обновляем последнее сообщение в списке чатов\n    setChats(prev => prev.map(chat =>\n      chat.id === activeChat\n        ? { ...chat, lastMessage: inputText || 'Вложение', unreadCount: 0 }\n        : chat\n    ));\n\n    // Имитация ответа бота\n    setTimeout(() => {\n      const botResponse: Message = {\n        id: (Date.now() + 1).toString(),\n        text: generateBotResponse(inputText, replyContext),\n        sender: 'bot',\n        timestamp: new Date(),\n        replyTo: userMessage.id,\n      };\n      setMessages(prev => [...prev, botResponse]);\n    }, 1000);\n  };\n\n  // Генерация ответа бота\n  const generateBotResponse = (userText: string, context: ReplyContext | null): string => {\n    const responses = [\n      \"Я понял ваш запрос. Давайте обсудим это подробнее.\",\n      \"Интересный вопрос! Давайте разберемся вместе.\",\n      \"Спасибо за ваше сообщение. Я уже работаю над этим.\",\n      \"Хорошо, я записал эту информацию. Что еще вас интересует?\",\n      \"Отличное замечание! Давайте продолжим наш разговор.\"\n    ];\n\n    if (context) {\n      return `Отвечая на ваше сообщение \"${context.messageText}\": ${responses[Math.floor(Math.random() * responses.length)]}`;\n    }\n\n    return responses[Math.floor(Math.random() * responses.length)];\n  };\n\n  // Обработчик вложения файла\n  const handleAttachment = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      setAttachment(e.target.files[0]);\n    }\n  };\n\n  // Обработчик нажатия клавиш\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // Переключение чата\n  const handleChatChange = (chatId: string) => {\n    // Удаляем предыдущий чат, если он пустой\n    setChats(prev => {\n      const prevChat = prev.find(c => c.id === activeChat);\n      if (prevChat?.isEmpty) {\n        return prev.filter(c => c.id !== activeChat);\n      }\n      return prev;\n    });\n\n    setActiveChat(chatId);\n    setIsMenuOpen(false);\n    setMessages([{\n      id: '1',\n      text: `Добро пожаловать в чат \"${chats.find(c => c.id === chatId)?.title}\"!`,\n      sender: 'bot',\n      timestamp: new Date(),\n    }]);\n\n    // Сбрасываем непрочитанные\n    setChats(prev => prev.map(chat =>\n      chat.id === chatId\n        ? { ...chat, unreadCount: 0 }\n        : chat\n    ));\n\n    setActiveChat(chatId);\n    setIsMenuOpen(false);\n    setMessages([{\n      id: '1',\n      text: `Добро пожаловать в чат \"${chats.find(c => c.id === chatId)?.title}\"!`,\n      sender: 'bot',\n      timestamp: new Date(),\n    }]);\n\n    // Сбрасываем непрочитанные\n    setChats(prev => prev.map(chat =>\n      chat.id === chatId\n        ? { ...chat, unreadCount: 0 }\n        : chat\n    ));\n  };\n\n  // Создание нового чата\n  const handleCreateChat = (modelId: string) => {\n    const newChat: Chat = {\n      id: Date.now().toString(),\n      title: `Чат ${chats.filter(c => c.model === modelId).length + 1}`,\n      lastMessage: 'Новый чат создан',\n      model: modelId,\n      isEmpty: true, // Теперь это допустимо\n    };\n\n    setChats(prev => [...prev, newChat]);\n    handleChatChange(newChat.id);\n  };\n\n  const [chatMenu, setChatMenu] = useState<ChatMenu>({\n    chatId: null,\n    isOpen: false,\n    position: null\n  });\n\n  // Получение чатов по моделям\n  const getChatsByModel = (modelId: string) => {\n    return chats.filter(chat => chat.model === modelId);\n  };\n\n  const handleOpenMenu = (chatId: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    const rect = e.currentTarget.getBoundingClientRect();\n    setChatMenu({\n      chatId,\n      isOpen: true,\n      position: { top: rect.bottom + 5, left: rect.left - 100 }\n    });\n  };\n\n  const handleRenameChat = (newName: string) => {\n    setChats(prev => prev.map(chat =>\n      chat.id === chatMenu.chatId ? { ...chat, title: newName } : chat\n    ));\n    setChatMenu({ chatId: null, isOpen: false, position: null });\n  };\n\n  const handleDeleteChat = () => {\n    if (!chatMenu.chatId) return;\n\n    setChats(prev => prev.filter(chat => chat.id !== chatMenu.chatId));\n    if (activeChat === chatMenu.chatId) {\n      const remainingChats = chats.filter(chat => chat.id !== chatMenu.chatId);\n      setActiveChat(remainingChats[0]?.id || '');\n    }\n    setChatMenu({ chatId: null, isOpen: false, position: null });\n  };\n\n  return (\n    <div className=\"chat-app\">\n      {/* Заголовок чата - убираем кнопку создания */}\n      <div className=\"chat-header\">\n        <button className=\"menu-button\" onClick={() => setIsMenuOpen(!isMenuOpen)}>\n          ☰\n        </button>\n        <h2>{chats.find(c => c.id === activeChat)?.title || 'Выберите чат'}</h2>\n        {activeChat && (\n          <button\n            className=\"create-chat-button\"\n            onClick={() => {\n              const currentModel = chats.find(c => c.id === activeChat)?.model || activeModel;\n              handleCreateChat(currentModel);\n            }}\n          >\n            ＋\n          </button>\n        )}\n      </div>\n\n      {/* Боковое меню */}\n      <div className={`side-menu ${isMenuOpen ? 'open' : ''}`}>\n        <button\n          className=\"settings-button\"\n          onClick={() => setSettings(prev => ({ ...prev, isOpen: true }))}\n        >\n          ⚙️\n        </button>\n        {settings.isOpen && (\n          <div className=\"settings-modal\">\n            <div className=\"settings-content\">\n              <button\n                className=\"close-settings\"\n                onClick={() => setSettings(prev => ({ ...prev, isOpen: false }))}\n              >\n                ×\n              </button>\n\n              <div className=\"user-profile\">\n                <img\n                  src={user.photo_url || 'https://via.placeholder.com/100'}\n                  alt=\"Аватар\"\n                  className=\"user-avatar\"\n                  onError={(e) => {\n                    (e.target as HTMLImageElement).src = 'https://via.placeholder.com/100';\n                  }}\n                />\n                <h3>\n                  {[user.first_name, user.last_name]\n                    .filter(Boolean)\n                    .join(' ') || 'Пользователь'}\n                </h3>\n                {user.username && <p>@{user.username}</p>}\n                {user.language_code && <p>Язык: {user.language_code.toUpperCase()}</p>}\n              </div>\n\n              <div className=\"theme-switcher\">\n                <button\n                  onClick={() => {\n                    const newTheme = settings.theme === 'light' ? 'dark' : 'light';\n                    setSettings(prev => ({ ...prev, theme: newTheme }));\n                    // Здесь можно добавить логику смены темы в Telegram WebApp\n                  }}\n                >\n                  {settings.theme === 'light' ? '🌙 Тёмная тема' : '☀️ Светлая тема'}\n                </button>\n              </div>\n            </div>\n            <div\n              className=\"settings-overlay\"\n              onClick={() => setSettings(prev => ({ ...prev, isOpen: false }))}\n            />\n          </div>\n        )}\n\n        <div className=\"menu-header\">\n          <h3>Мои чаты</h3>\n          <button className=\"close-menu\" onClick={() => setIsMenuOpen(false)}>\n            ×\n          </button>\n        </div>\n\n        <div className=\"categories-tabs\">\n          {models.map(model => (\n            <button\n              key={model.id}\n              className={`category-tab ${activeModel === model.id ? 'active' : ''}`}\n              onClick={() => setActiveModel(model.id)}\n            >\n              {model.name}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"chat-list\">\n          {/* Добавляем кнопку создания чата в категорию */}\n          <button\n            className=\"create-chat-in-category small\"\n            onClick={() => handleCreateChat(activeModel)}\n          >\n            ＋ Создать чат\n          </button>\n\n          {getChatsByModel(activeModel).length > 0 ? (\n            getChatsByModel(activeModel).map(chat => (\n              <div\n                key={chat.id}\n                className={`chat-item ${activeChat === chat.id ? 'active' : ''}`}\n                onClick={() => handleChatChange(chat.id)}\n              >\n                <div className=\"chat-info\">\n                  <div className=\"chat-title\">{chat.title}</div>\n                  <div className=\"chat-preview\">\n                    {chat.lastMessage?.substring(0, 30)}{chat.lastMessage && chat.lastMessage.length > 30 ? '...' : ''}\n                  </div>\n                </div>\n\n                <div className=\"chat-actions\">\n                  <button className=\"chat-menu-button\" onClick={(e) => handleOpenMenu(chat.id, e)}>\n                    ⋮\n                  </button>\n                  {chatMenu.isOpen && (\n                    <>\n                      <div\n                        className=\"menu-overlay\"\n                        onClick={() => setChatMenu({ chatId: null, isOpen: false, position: null })}\n                      />\n                      <div\n                        className=\"chat-context-menu\"\n                        style={{\n                          top: `${chatMenu.position?.top}px`,\n                          left: `${chatMenu.position?.left}px`\n                        }}\n                      >\n                        <button\n                          className=\"menu-item\"\n                          onClick={() => {\n                            const newName = prompt('Введите новое название:',\n                              chats.find(c => c.id === chatMenu.chatId)?.title);\n                            if (newName) handleRenameChat(newName);\n                          }}\n                        >\n                          Переименовать\n                        </button>\n                        <button\n                          className=\"menu-item delete\"\n                          onClick={handleDeleteChat}\n                        >\n                          Удалить чат\n                        </button>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            ))\n          ) : (\n            <div className=\"no-chats\">\n              Нет чатов в этой категории\n            </div>\n          )}\n        </div>\n      </div>\n\n\n      {/* Затемнение фона при открытом меню */}\n      {isMenuOpen && (\n        <div className=\"menu-overlay\" onClick={() => setIsMenuOpen(false)} />\n      )}\n\n      {/* Область сообщений */}\n      <div className=\"messages-container\">\n        {activeChat ? (\n          messages.map((message) => (\n            <div\n              key={message.id}\n              className={`message ${message.sender}`}\n              onClick={() => setReplyContext({\n                messageId: message.id,\n                messageText: message.text,\n              })}\n            >\n              {message.replyTo && (\n                <div className=\"reply-context\">\n                  {messages.find(m => m.id === message.replyTo)?.text}\n                </div>\n              )}\n\n              {message.attachment && (\n                <div className=\"attachment\">\n                  {message.attachment.type === 'image' ? (\n                    <img src={message.attachment.url} alt=\"Прикрепленное изображение\" />\n                  ) : (\n                    <a href={message.attachment.url} download>\n                      📄 {message.attachment.name || 'Документ'}\n                    </a>\n                  )}\n                </div>\n              )}\n\n              <div className=\"message-text\">{message.text}</div>\n              <div className=\"message-time\">\n                {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"no-chat-selected\">\n            <p>Выберите чат из списка или создайте новый</p>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Панель ввода (только если выбран чат) */}\n      {activeChat && (\n        <div className=\"input-area\">\n          {replyContext && (\n            <div className=\"reply-preview\">\n              Ответ на: {replyContext.messageText}\n              <button onClick={() => setReplyContext(null)}>×</button>\n            </div>\n          )}\n\n          <div className=\"input-container\">\n            <button\n              className=\"attach-button\"\n              onClick={() => fileInputRef.current?.click()}\n            >\n              📎\n            </button>\n\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              onChange={handleAttachment}\n              style={{ display: 'none' }}\n              accept=\"image/*,.pdf,.doc,.docx\"\n            />\n\n            <textarea\n              value={inputText}\n              onChange={(e) => setInputText(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Напишите сообщение...\"\n              rows={1}\n            />\n\n            <button\n              className=\"send-button\"\n              onClick={handleSendMessage}\n              disabled={!inputText.trim() && !attachment}\n            >\n              {attachment ? '📤' : '➤'}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatApp;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}